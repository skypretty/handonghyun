<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>여기어때 컴퍼니 : Visual System</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
            background-color: #ffffff;
            color: #0a0a0a;
            line-height: 1.5;
            overflow-x: hidden;
        }

        /* Header */
        header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            padding: 20px 40px;
            background-color: rgba(255, 255, 255, 0.98);
            border-bottom: 1px solid #e5e5e5;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        .header-content {
            max-width: 100%;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .back-button {
            font-size: 1.5rem;
            color: #0a0a0a;
            text-decoration: none;
            transition: opacity 0.3s ease;
            cursor: pointer;
        }

        .back-button:hover {
            opacity: 0.6;
        }

        .header-title {
            font-size: 1.1rem;
            font-weight: 600;
            letter-spacing: -0.02em;
        }

        .view-toggle {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .toggle-button {
            padding: 8px 16px;
            border: 1px solid #e5e5e5;
            background-color: #ffffff;
            color: #666666;
            font-size: 0.9rem;
            font-weight: 500;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Poppins', sans-serif;
        }

        .toggle-button.active {
            background-color: #0a0a0a;
            color: #ffffff;
            border-color: #0a0a0a;
        }

        .toggle-button:hover:not(.active) {
            border-color: #0a0a0a;
            color: #0a0a0a;
        }

        /* Main Content */
        .main-content {
            padding-top: 61px;
        }

        /* Project Info Section */
        .project-info {
            padding: 40px 40px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .project-info h1 {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 20px;
            letter-spacing: -0.03em;
        }

        .project-meta {
            display: flex;
            gap: 40px;
            margin-bottom: 40px;
            font-size: 0.95rem;
            color: #666666;
        }

        .project-meta-item {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .meta-label {
            font-weight: 600;
            color: #0a0a0a;
        }

        .project-description {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #333333;
            max-width: 800px;
        }

        /* Gallery Container */
        .gallery-section {
            width: 100%;
            background-color: #fafafa;
            border-top: 1px solid #e5e5e5;
            border-bottom: 1px solid #e5e5e5;
            position: relative;
        }

        .gallery-container {
            height: calc(100vh - 61px - 180px);
            min-height: 400px;
            overflow: hidden;
            position: relative;
            cursor: grab;
            user-select: none;
        }

        .gallery-container:active {
            cursor: grabbing;
        }

        .gallery-canvas {
            position: absolute;
            width: 100%;
            height: 100%;
            will-change: transform;
            backface-visibility: hidden;
            perspective: 1000px;
        }

        .gallery-grid {
            position: absolute;
            display: grid;
            grid-template-columns: repeat(70, 100px);
            gap: 50px;
            padding: 40px;
            width: max-content;
        }

        .gallery-item {
            width: 100px;
            height: 100px;
            background-color: transparent;
            border-radius: 0;
            overflow: visible;
            box-shadow: none;
            transition: all 0.3s ease;
            position: relative;
            pointer-events: none;
            user-select: none;
            contain: layout style paint;
        }

        .gallery-item:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
        }

        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            pointer-events: none;
            user-select: none;
            -webkit-user-drag: none;
        }

        .gallery-item-3d {
            transform-style: preserve-3d;
            perspective: 1000px;
        }

        .gallery-item-3d:hover {
            transform: rotateY(5deg) rotateX(5deg) translateY(-4px);
        }

        /* Gallery Controls - Floating */
        .gallery-controls {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 16px;
            background-color: rgba(255, 255, 255, 0.95);
            padding: 10px;
            border-radius: 100px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            backdrop-filter: blur(10px);
            z-index: 100;
            pointer-events: auto;
        }

        .control-toggle-button {
            padding: 14px 36px;
            border: 2px solid transparent;
            background-color: transparent;
            color: #666666;
            font-size: 1rem;
            font-weight: 500;
            border-radius: 100px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Poppins', sans-serif;
        }

        .control-toggle-button.active {
            background-color: #0a0a0a;
            color: #ffffff;
            border-color: #0a0a0a;
        }

        .control-toggle-button:hover:not(.active) {
            background-color: #f5f5f5;
            color: #0a0a0a;
        }

        /* Drag Tooltip */
        .drag-tooltip {
            position: fixed;
            background-color: rgba(0, 0, 0, 0.85);
            color: white;
            padding: 10px 16px;
            border-radius: 8px;
            font-size: 0.85rem;
            pointer-events: none;
            z-index: 9999;
            opacity: 0;
            transition: opacity 0.3s ease;
            white-space: nowrap;
            transform: translate(-50%, -200%);
            font-family: 'Poppins', sans-serif;
        }

        .drag-tooltip.show {
            opacity: 1;
        }

        .drag-tooltip::after {
            content: '';
            position: absolute;
            bottom: -6px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-top: 6px solid rgba(0, 0, 0, 0.85);
        }

        /* Additional Content Section */
        .content-section {
            padding: 80px 40px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .content-section h2 {
            font-size: 2rem;
            font-weight: 600;
            margin-bottom: 30px;
            letter-spacing: -0.02em;
        }

        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .content-card {
            background-color: #fafafa;
            padding: 40px;
            border-radius: 12px;
            transition: transform 0.3s ease;
        }

        .content-card:hover {
            transform: translateY(-2px);
        }

        .content-card h3 {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .content-card p {
            color: #666666;
            line-height: 1.7;
        }

        /* Footer */
        footer {
            border-top: 1px solid #e5e5e5;
            padding: 40px 40px;
            text-align: center;
            color: #999999;
            font-size: 0.85rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            header {
                padding: 16px 24px;
            }

            .header-title {
                font-size: 0.95rem;
            }

            .toggle-button {
                padding: 6px 12px;
                font-size: 0.85rem;
            }

            .project-info {
                padding: 30px 24px;
            }

            .project-info h1 {
                font-size: 2rem;
            }

            .project-meta {
                flex-direction: column;
                gap: 20px;
            }

            .gallery-container {
                height: calc(100vh - 60px - 120px);
                min-height: 300px;
            }

            .gallery-controls {
                bottom: 20px;
                padding: 8px;
            }

            .control-toggle-button {
                padding: 12px 28px;
                font-size: 0.9rem;
            }

            .gallery-grid {
                grid-template-columns: repeat(10, 100px);
                gap: 16px;
                padding: 24px;
            }

            .gallery-item {
                width: 100px;
                height: 100px;
            }

            .content-section {
                padding: 60px 24px;
            }

            .content-grid {
                grid-template-columns: 1fr;
            }

            .gallery-controls {
                padding: 16px 24px;
            }

            .control-toggle-button {
                padding: 8px 20px;
                font-size: 0.85rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <a href="index.html" class="back-button">←</a>
            <h1 class="header-title">Visual System</h1>
            <div class="view-toggle">
                <!-- 토글 버튼 제거됨 -->
            </div>
        </div>
    </header>

    <main class="main-content">
        <!-- Infinite Scroll Gallery Section -->
        <section class="gallery-section">
            <div class="gallery-container" id="galleryContainer">
                <div class="gallery-canvas" id="galleryCanvas">
                    <div class="gallery-grid" id="galleryGrid">
                        <!-- Gallery items will be generated by JavaScript -->
                    </div>
                </div>
                <div class="drag-tooltip" id="dragTooltip">Drag to explore</div>
                <div class="gallery-controls">
                    <button class="control-toggle-button active" data-mode="2d">2D</button>
                    <button class="control-toggle-button" data-mode="3d">3D</button>
                </div>
            </div>
        </section>

        <!-- Project Info Section -->
        <section class="project-info">
            <h1>여기어때 컴퍼니 : Visual System</h1>
            <div class="project-meta">
                <div class="project-meta-item">
                    <span class="meta-label">Year</span>
                    <span>2025</span>
                </div>
                <div class="project-meta-item">
                    <span class="meta-label">Role</span>
                    <span>Visual Design, Art Direction</span>
                </div>
                <div class="project-meta-item">
                    <span class="meta-label">Client</span>
                    <span>여기어때 컴퍼니</span>
                </div>
            </div>
            <p class="project-description">
                여기어때 컴퍼니의 새로운 비주얼 시스템을 구축했습니다. 
                브랜드 아이덴티티를 강화하고 다양한 터치포인트에서 일관된 경험을 제공하기 위한 
                포괄적인 디자인 언어와 그래픽 요소들을 개발했습니다.
            </p>
        </section>

        <!-- Additional Content Section -->
        <section class="content-section">
            <h2>Design System Overview</h2>
            <div class="content-grid">
                <div class="content-card">
                    <h3>Color Palette</h3>
                    <p>브랜드 고유의 컬러 시스템을 개발하여 모든 비주얼 커뮤니케이션에 일관성을 부여했습니다.</p>
                </div>
                <div class="content-card">
                    <h3>Typography</h3>
                    <p>가독성과 브랜드 개성을 모두 반영한 타이포그래피 시스템을 구축했습니다.</p>
                </div>
                <div class="content-card">
                    <h3>Iconography</h3>
                    <p>직관적이고 친근한 아이콘 세트로 사용자 경험을 향상시켰습니다.</p>
                </div>
                <div class="content-card">
                    <h3>Motion Design</h3>
                    <p>브랜드 경험을 더욱 생동감 있게 만드는 모션 가이드라인을 설정했습니다.</p>
                </div>
            </div>
        </section>

        <section class="content-section">
            <h2>Application Examples</h2>
            <p class="project-description">
                개발된 비주얼 시스템은 웹사이트, 모바일 앱, 마케팅 자료, 오프라인 공간 등 
                다양한 채널에서 활용되어 통합된 브랜드 경험을 제공합니다.
            </p>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 Donghyun Han. All rights reserved.</p>
    </footer>

    <script>
        // 2D/3D 이미지 매핑 (총 117개)
        const imageMapping = {
            '2d': [
                // 음식 (60개)
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-acorn-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-apple-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-baguette-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-beer-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-bibimbap-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-blueberry-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-bungeoppang-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-cake-brown-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-cake-orange-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-cake-pink-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-chestnut-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-chicken-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-chocolateicecream-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-coconut-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-coffee-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-croissant-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-cupcake-small-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-dimsum-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-donut-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-fishcake-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-gingerbreadman-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-hamburger-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-hotdog-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-hotteok-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-icetea-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-juice-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-kimbap-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-mangosteen-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-martini-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-mojito-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-nasigoreng-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-noodle-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-padthai-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-peach.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-pear-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-persimmon-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-pinecone-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-pizza-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-popcorn-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-potatochips-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-pretzel-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-rice-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-salmonsushi-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-samgyetang-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-sandwich-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-shrimpsalad-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-slicedbread-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-songpyeon-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-strawberry-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-strawberrymochi-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-sweetpotato-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-takoyaki-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-tomato-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-tropicalcocktail-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-tteokguk-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-vanillaicecream-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-watermelon-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-wine-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-yakgwa-2d.png',
                // 여행/레저 (57개)
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-airlineseat-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-airplaneticket-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-bag-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-babytoy-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-beachball-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-beachumbrellachair-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-beachumbrella-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-bicycle-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-blocktoy-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-bus-blue_2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-bus-green_2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-cablecar-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-camera-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-campfire-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-camping-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-car-red_2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-car-white_2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-carrier-blue_2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-carrier-geen_2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-carrier-red_2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-chair-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-compass-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-cruise-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-duckdoll-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-earth-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-flowerpetal-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-healthpt-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-hotairballoon-color_2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-hotelkey-gray_2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-hotelkey-red_2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-lock-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-map-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-onebed-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-passport-blue_2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-passport-red_2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-practiceroom-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-reciept-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-rickshaw-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-sandcastle-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-shoes-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-shoppingbag-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-snorkeling-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-snowman-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-stroller-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-suncream-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-taxi-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-toothbrush-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-train-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-travelbackpack-blue_2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-travelbackpack-red_2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-tree-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-tube-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-twobed-2d.png',
            ],
            '3d': [
                // 향후 3D 이미지 추가 예정 (2D와 동일한 순서로)
                // 현재는 2D 이미지를 임시로 사용
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-acorn-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-apple-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-baguette-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-beer-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-bibimbap-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-blueberry-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-bungeoppang-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-cake-brown-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-cake-orange-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-cake-pink-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-chestnut-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-chicken-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-chocolateicecream-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-coconut-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-coffee-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-croissant-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-cupcake-small-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-dimsum-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-donut-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-fishcake-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-gingerbreadman-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-hamburger-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-hotdog-2d.png',
                'https://pub-61ec350ba14f41ed9d298c92375918b9.r2.dev/2d-graphic/image-hotteok-2d.png',
            ]
        };
        
        // 배열을 랜덤하게 섞는 함수 (Fisher-Yates shuffle)
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        class InfiniteGallery {
            constructor() {
                this.container = document.getElementById('galleryContainer');
                this.canvas = document.getElementById('galleryCanvas');
                this.grid = document.getElementById('galleryGrid');
                this.tooltip = document.getElementById('dragTooltip');
                
                this.isDragging = false;
                this.startX = 0;
                this.startY = 0;
                
                // 초기 위치를 그리드 중앙으로 (7x7 구조의 3번째 타일)
                // 이렇게 하면 위/아래/좌/우 모든 방향에 콘텐츠 존재
                const itemSize = 100;
                const gap = 50; // 간격 50px
                const columns = 10;
                const rows = 10;
                const tileWidth = columns * itemSize + (columns - 1) * gap;
                const tileHeight = rows * itemSize + (rows - 1) * gap;
                
                // 3번째 타일 위치로 시작
                this.translateX = -tileWidth * 3;
                this.translateY = -tileHeight * 3;
                this.velocity = { x: 0, y: 0 };
                this.viewMode = '2d';
                this.isHovering = false;
                this.autoScrollSpeed = 0.5; // 자동 스크롤 속도 (이전: 1.5px/frame, 현재: 0.5px/frame)
                this.isDragged = false; // 드래그 여부 확인용
                this.dragThreshold = 5; // 드래그로 간주할 최소 이동 거리
                this.tooltipShown = false; // 툴팁 표시 여부
                this.showTooltip = false; // 툴팁 표시 플래그
                this.hasEverDragged = false; // 한 번이라도 드래그했는지 여부
                
                this.init();
            }

            init() {
                this.generateGalleryItems();
                this.setupEventListeners();
                this.startAnimation();
            }

            generateGalleryItems() {
                // 진정한 무한 스크롤: 7x7 타일 구조 (총 4900개 아이템)
                const totalItems = 100; // 10x10 그리드
                const tilesX = 7;
                const tilesY = 7;
                this.grid.innerHTML = '';
                
                // 현재 모드에 맞는 이미지 배열 가져오기 및 랜덤 섞기
                const images = imageMapping[this.viewMode];
                const shuffledImages = shuffleArray(images);
                
                // 49개 타일 모두 동일한 랜덤 순서로 채움
                for (let ty = 0; ty < tilesY; ty++) {
                    for (let tx = 0; tx < tilesX; tx++) {
                        for (let i = 0; i < totalItems; i++) {
                            const item = document.createElement('div');
                            item.className = 'gallery-item';
                            
                            const img = document.createElement('img');
                            img.src = shuffledImages[i % shuffledImages.length];
                            img.alt = `Visual System ${(i % shuffledImages.length) + 1}`;
                            img.draggable = false;
                            img.loading = 'lazy';
                            img.dataset.index = i % shuffledImages.length;
                            
                            item.appendChild(img);
                            this.grid.appendChild(item);
                        }
                    }
                }
            }

            setupEventListeners() {
                // Mouse events
                this.container.addEventListener('mousedown', this.onMouseDown.bind(this));
                this.container.addEventListener('mousemove', this.onMouseMove.bind(this));
                this.container.addEventListener('mouseup', this.onMouseUp.bind(this));
                this.container.addEventListener('mouseleave', this.onMouseUp.bind(this));
                
                // Hover detection for auto-scroll and tooltip
                this.container.addEventListener('mouseenter', (e) => {
                    // 버튼 영역이 아닐 때만 호버로 인식
                    if (!e.target.closest('.gallery-controls')) {
                        this.isHovering = true;
                        
                        // 한 번이라도 드래그했다면 툴팁 표시 안 함
                        if (!this.hasEverDragged) {
                            this.showTooltip = true;
                        }
                    }
                });
                
                this.container.addEventListener('mousemove', (e) => {
                    // 버튼 영역에서는 호버 해제 및 툴팁 숨김
                    if (e.target.closest('.gallery-controls')) {
                        this.isHovering = false;
                        this.showTooltip = false;
                        this.tooltip.classList.remove('show');
                        return;
                    }
                    
                    // 드래그 중이 아니고, 한 번도 드래그 안 했을 때만 툴팁 위치 업데이트
                    if (!this.isDragging && this.showTooltip && !this.hasEverDragged) {
                        this.tooltip.style.left = e.clientX + 'px';
                        this.tooltip.style.top = e.clientY + 'px';
                        this.tooltip.classList.add('show');
                        this.isHovering = true;
                    }
                });
                
                this.container.addEventListener('mouseleave', () => {
                    this.isHovering = false;
                    this.showTooltip = false;
                    this.tooltip.classList.remove('show');
                });
                
                // Touch events
                this.container.addEventListener('touchstart', this.onTouchStart.bind(this));
                this.container.addEventListener('touchmove', this.onTouchMove.bind(this));
                this.container.addEventListener('touchend', this.onTouchEnd.bind(this));
                
                // View mode toggle - 갤러리 컨트롤 버튼
                document.querySelectorAll('.control-toggle-button').forEach(button => {
                    button.addEventListener('click', this.toggleViewMode.bind(this));
                });
                
                // 클릭 이벤트 차단
                this.container.addEventListener('click', (e) => {
                    if (this.isDragged) {
                        e.preventDefault();
                        e.stopPropagation();
                    }
                }, true);
            }

            onMouseDown(e) {
                // 툴팁 즉시 숨김
                this.tooltip.classList.remove('show');
                this.showTooltip = false;
                this.hasEverDragged = true; // 드래그 기록
                
                this.isDragging = true;
                this.isDragged = false;
                this.mouseDownX = e.clientX;
                this.mouseDownY = e.clientY;
                this.startX = e.clientX - this.translateX;
                this.startY = e.clientY - this.translateY;
                this.velocity = { x: 0, y: 0 };
            }

            onMouseMove(e) {
                if (!this.isDragging) return;
                
                const deltaX = e.clientX - this.startX;
                const deltaY = e.clientY - this.startY;
                
                // 드래그 거리 계산
                const dragDistance = Math.sqrt(
                    Math.pow(e.clientX - this.mouseDownX, 2) + 
                    Math.pow(e.clientY - this.mouseDownY, 2)
                );
                
                if (dragDistance > this.dragThreshold) {
                    this.isDragged = true;
                }
                
                this.velocity.x = deltaX - this.translateX;
                this.velocity.y = deltaY - this.translateY;
                
                this.translateX = deltaX;
                this.translateY = deltaY;
                
                this.updateTransform();
            }

            onMouseUp() {
                if (this.isDragging) {
                    const itemSize = 100;
                    const gap = 50; // 간격 50px
                    const columns = 10;
                    const rows = 10;
                    const tileWidth = columns * itemSize + (columns - 1) * gap;
                    const tileHeight = rows * itemSize + (rows - 1) * gap;
                    
                    // 중앙 위치
                    const centerX = -tileWidth * 3;
                    const centerY = -tileHeight * 3;
                    
                    // 중앙 기준 ±1타일 범위로 리셋
                    while (this.translateX <= centerX - tileWidth) {
                        this.translateX += tileWidth;
                        this.startX -= tileWidth;
                    }
                    while (this.translateX >= centerX + tileWidth) {
                        this.translateX -= tileWidth;
                        this.startX += tileWidth;
                    }
                    
                    while (this.translateY <= centerY - tileHeight) {
                        this.translateY += tileHeight;
                        this.startY -= tileHeight;
                    }
                    while (this.translateY >= centerY + tileHeight) {
                        this.translateY -= tileHeight;
                        this.startY += tileHeight;
                    }
                    
                    this.updateTransform();
                }
                
                this.isDragging = false;
                if (!this.hasEverDragged) {
                    this.showTooltip = true;
                }
            }

            onTouchStart(e) {
                if (e.touches.length === 1) {
                    this.isDragging = true;
                    this.isHovering = true; // 터치 시 자동 스크롤 중지
                    this.startX = e.touches[0].clientX - this.translateX;
                    this.startY = e.touches[0].clientY - this.translateY;
                }
            }

            onTouchMove(e) {
                if (!this.isDragging || e.touches.length !== 1) return;
                
                e.preventDefault();
                const deltaX = e.touches[0].clientX - this.startX;
                const deltaY = e.touches[0].clientY - this.startY;
                
                this.translateX = deltaX;
                this.translateY = deltaY;
                
                this.updateTransform();
            }

            onTouchEnd() {
                this.isDragging = false;
                this.isHovering = false; // 터치 종료 시 자동 스크롤 재개
            }

            updateTransform() {
                this.canvas.style.transform = `translate(${this.translateX}px, ${this.translateY}px)`;
            }

            startAnimation() {
                const itemSize = 100;
                const gap = 50; // 간격 50px
                const columns = 10;
                const rows = 10;
                const tileWidth = columns * itemSize + (columns - 1) * gap;
                const tileHeight = rows * itemSize + (rows - 1) * gap;
                
                // 중앙 위치 (3번째 타일)
                const centerX = -tileWidth * 3;
                const centerY = -tileHeight * 3;
                
                const animationLoop = () => {
                    // 자동 스크롤
                    if (!this.isHovering && !this.isDragging) {
                        this.translateX -= this.autoScrollSpeed;
                    }
                    
                    // 관성 효과
                    if (!this.isDragging && (Math.abs(this.velocity.x) > 0.1 || Math.abs(this.velocity.y) > 0.1)) {
                        this.velocity.x *= 0.95;
                        this.velocity.y *= 0.95;
                        
                        this.translateX += this.velocity.x;
                        this.translateY += this.velocity.y;
                    }
                    
                    // 무한 루프 - 중앙 기준 ±1타일 범위에서 리셋
                    if (!this.isDragging) {
                        // 왼쪽으로 1타일 넘어가면 리셋
                        if (this.translateX <= centerX - tileWidth) {
                            this.translateX += tileWidth;
                            this.startX -= tileWidth;
                        } 
                        // 오른쪽으로 1타일 넘어가면 리셋
                        else if (this.translateX >= centerX + tileWidth) {
                            this.translateX -= tileWidth;
                            this.startX += tileWidth;
                        }
                        
                        // 위로 1타일 넘어가면 리셋
                        if (this.translateY <= centerY - tileHeight) {
                            this.translateY += tileHeight;
                            this.startY -= tileHeight;
                        } 
                        // 아래로 1타일 넘어가면 리셋
                        else if (this.translateY >= centerY + tileHeight) {
                            this.translateY -= tileHeight;
                            this.startY += tileHeight;
                        }
                    }
                    
                    this.updateTransform();
                    requestAnimationFrame(animationLoop);
                };
                
                animationLoop();
            }

            toggleViewMode(e) {
                const button = e.target;
                const mode = button.dataset.mode;
                
                if (mode === this.viewMode) return;
                
                // Update button states
                document.querySelectorAll('.control-toggle-button').forEach(btn => {
                    btn.classList.remove('active');
                });
                button.classList.add('active');
                
                // Update view mode
                this.viewMode = mode;
                
                // 이미지 전환: 같은 인덱스의 2D/3D 이미지로 교체
                const images = imageMapping[mode];
                const allImages = document.querySelectorAll('.gallery-item img');
                
                allImages.forEach(img => {
                    const index = parseInt(img.dataset.index);
                    img.src = images[index % images.length];
                });
                
                // 3D 모드일 때 시각적 효과 추가 (선택사항)
                const items = document.querySelectorAll('.gallery-item');
                items.forEach(item => {
                    if (mode === '3d') {
                        item.classList.add('gallery-item-3d');
                    } else {
                        item.classList.remove('gallery-item-3d');
                    }
                });
            }
        }

        // Initialize gallery
        const gallery = new InfiniteGallery();
    </script>
</body>
</html>
